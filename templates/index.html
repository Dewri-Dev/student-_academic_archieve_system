{% extends "base.html" %}

{% block title %}Student Academic Archive{% endblock %}

{% block content %}

<body class="bg-gray-100 text-gray-800 font-sans">

    <div class="flex flex-col min-h-screen">
        <!-- Navigation Bar -->
        <nav class="bg-white shadow-sm sticky top-0 z-50">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <!-- Logo / Site Title -->
                    <div class="flex-shrink-0">
                        <a href="/" class="flex items-center gap-2 text-xl font-bold text-gray-900">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 1.987l-7.5 4.5v9l7.5 4.5 7.5-4.5v-9l-7.5-4.5zm0 2.473l5.5 3.3v6.48l-5.5 3.3-5.5-3.3v-6.48l5.5-3.3z"/>
                                <path d="M12 12.25l-5.5-3.3v-1.5l5.5 3.3 5.5-3.3v1.5l-5.5 3.3z"/>
                            </svg>
                            <span>Academic Archive</span>
                        </a>
                    </div>

                    <!-- Login/Logout Buttons -->
                    <div class="flex items-center gap-4">
                        {% if session.user_id %}
                            <span class="text-sm text-gray-500 hidden sm:block">
                                Welcome, {{ "Admin" if session.is_admin else "User" }}
                            </span>
                            <a href="/logout" class="px-4 py-2 text-sm font-medium border border-red-500 text-red-500 rounded-md hover:bg-red-500 hover:text-white transition-colors duration-200">
                                Logout
                            </a>
                        {% else %}
                            <a href="/login" class="px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200">
                                Login
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-grow">
            <!-- Hero Section -->
            <section class="py-16 sm:py-20">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
                        <!-- Hero Text -->
                        <div class="text-center md:text-left">
                            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900 leading-tight tracking-tight mb-4">
                                Your Gateway to Knowledge
                            </h1>
                            <p class="text-lg md:text-xl text-black-700 max-w-xl mx-auto md:mx-0 mb-8">
                                Access a centralized repository of course materials and past question papers to excel in your studies.
                            </p>
                            <div class="flex justify-center md:justify-start gap-4">
                                <a href="#resources" class="px-8 py-3 font-semibold bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-transform transform hover:scale-105">
                                    Explore Resources
                                </a>
                            </div>
                        </div>
                        <!-- Hero Illustration -->
                        <div class="hidden md:flex justify-center items-center">
                             <svg class="w-full max-w-md text-gray-300" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                                <path fill="#E2E8F0" d="M48.2,-64.8C62.3,-54.2,73.4,-39.8,78.3,-23.5C83.2,-7.2,81.9,10.9,74.7,25.8C67.5,40.7,54.4,52.4,40.1,61.3C25.8,70.2,10.3,76.3,-5.4,78.2C-21.1,80.1,-42.2,77.8,-56.9,67.3C-71.6,56.8,-80,38.1,-82.9,18.8C-85.8,-0.5,-83.3,-20.4,-73.8,-35.6C-64.3,-50.8,-47.8,-61.2,-31.9,-68.2C-16,-75.2,-0.8,-78.7,14.3,-75.1C29.4,-71.5,44.1,-61.7,48.2,-64.8Z" transform="translate(100 100)" />
                                <text x="50%" y="50%" font-family="Arial, sans-serif" font-size="100" fill="#94A3B8" text-anchor="middle" dy=".3em">ðŸŽ“</text>
                            </svg>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Feature Links Section -->
            <section id="resources" class="py-16 sm:py-20 bg-white">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                         <h2 class="text-3xl font-bold tracking-tight text-gray-900">Explore Our Resources</h2>
                         <p class="mt-4 text-lg text-gray-600 max-w-2xl mx-auto">Dive into our collection of academic materials.</p>
                    </div>
                    <div class="flex flex-wrap justify-center items-center gap-8">
                        <!-- Courses Card -->
                        <a href="/courses" class="group w-full md:w-80 p-8 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-2 transition-all duration-300">
                            <div class="mb-4 bg-blue-100 text-blue-600 rounded-lg w-16 h-16 flex items-center justify-center mx-auto">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v11.494m-9-5.747h18" /><path d="M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z"/></svg>
                            </div>
                            <h3 class="text-xl font-semibold mb-2 text-center text-gray-900">Courses</h3>
                            <p class="text-gray-600 text-center">Explore video lectures and detailed study materials.</p>
                        </a>

                        <!-- Question Papers Card -->
                        <a href="/papers" class="group w-full md:w-80 p-8 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-2 transition-all duration-300">
                            <div class="mb-4 bg-green-100 text-green-600 rounded-lg w-16 h-16 flex items-center justify-center mx-auto">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg>
                            </div>
                            <h3 class="text-xl font-semibold mb-2 text-center text-gray-900">Question Papers</h3>
                            <p class="text-gray-600 text-center">Review past papers to prepare for your exams.</p>
                        </a>

                        <!-- Notes Card -->
                        <a href="/notes" class="group w-full md:w-80 p-8 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-2 transition-all duration-300">
                            <div class="mb-4 bg-purple-100 text-purple-600 rounded-lg w-16 h-16 flex items-center justify-center mx-auto">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold mb-2 text-center text-gray-900">Notes</h3>
                            <p class="text-gray-600 text-center">Find community-uploaded notes and study guides.</p>
                        </a>

                        <!-- Dashboard Card -->
                        <a href="/dashboard" class="group w-full md:w-80 p-8 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-xl hover:-translate-y-2 transition-all duration-300">
                            <div class="mb-4 bg-yellow-100 text-yellow-600 rounded-lg w-16 h-16 flex items-center justify-center mx-auto">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                </svg>
                            </div>
                            <h3 class="text-xl font-semibold mb-2 text-center text-gray-900">Dashboard</h3>
                            <p class="text-gray-600 text-center">Track your attendance and progress.</p>
                        </a>
                    </div>
                </div>
            </section>

            <!-- Admin Panel Section -->
            {% if session.get("is_admin") %}
            <section class="py-16 sm:py-20">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-12">
                        <h2 class="text-3xl font-bold tracking-tight text-gray-900">Admin Panel</h2>
                        <p class="mt-4 text-lg text-gray-600">Manage users and monitor site activity.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                        <!-- View Activity Logs Card -->
                        <a href="/logs" class="group block p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-xl hover:border-blue-500 transition-all duration-300">
                            <div class="flex items-center gap-4">
                                <div class="bg-red-100 p-3 rounded-lg">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" /></svg>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg text-gray-900">Activity Logs</h3>
                                    <p class="text-sm text-gray-600">Track user actions and site history.</p>
                                </div>
                            </div>
                        </a>

                        <!-- View Registered Users Card -->
                        <a href="/users" class="group block p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-xl hover:border-blue-500 transition-all duration-300">
                            <div class="flex items-center gap-4">
                                <div class="bg-sky-100 p-3 rounded-lg">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-sky-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A4 4 0 019 10.707a4 4 0 01-3.79 4.095z" /></svg>
                                </div>
                                <div>
                                    <h3 class="font-semibold text-lg text-gray-900">Registered Users</h3>
                                    <p class="text-sm text-gray-600">View and manage all user accounts.</p>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
            </section>
            {% endif %}
        </main>

        <!-- Footer -->
        <footer class="bg-white mt-auto">
            <div class="container mx-auto py-6 px-4 sm:px-6 lg:px-8 text-center text-gray-500">
                 &copy; <span id="current-year"></span> Student Academic Archive. All Rights Reserved.
            </div>
        </footer>
    </div>

    <!-- Socket.IO script for real-time user updates -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script>
        // Set the current year in the footer
        document.getElementById('current-year').textContent = new Date().getFullYear();

        // only run if user is logged-in
        const userEmail = "{{ session.email | default('', true) }}";
        if (userEmail) {
            const socket = io(); // connects to same origin

            socket.on("connect", function() {
                // tell server who we are
                socket.emit("join", { email: userEmail });
            });

            // optional: tell server when leaving intentionally
            window.addEventListener("beforeunload", () => {
                socket.emit("leave", {});
            });

            // receive updates with the set/list of online user emails
            socket.on("update_users", function(onlineList) {
                // You can use this data to show an online user count, for example.
                console.log("Online users:", onlineList);
            });
        }
    </script>
</body>
{% endblock %}
